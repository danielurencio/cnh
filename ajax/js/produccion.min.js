$(function() {
  $("#setFilter").click(function() {
    var chkAsignaciones = document.getElementById("chkAsignaciones").checked;
    var chkContratos = document.getElementById("chkContratos").checked;
    var dataTypeGas = document.getElementById("dataTypeGas").checked;
    var dataTypeOil = document.getElementById("dataTypeOil").checked;
    var sYear = document.getElementById("sYear").value;
    var sMonth = document.getElementById("sMonth").value;
    var eYear = document.getElementById("eYear").value;
    var eMonth = document.getElementById("eMonth").value;
    var operator = document.getElementById("dataOperator").value;

    var f = { 'sYear':sYear, 'sMonth':sMonth, 'eYear':eYear, 'eMonth':eMonth };

    function Periodicidad() {
	var periodicidad;
	var arr = document.getElementsByClassName("periodicidad");
	for(var i in arr) {
	  if(arr[i].checked) periodicidad = arr[i].value;
	}

	return periodicidad;
    };

    function type() {
	var t;
	if(dataTypeGas && dataTypeOil) {
	  t = "oil;gas";
	}
	if(dataTypeGas && !dataTypeOil) {
	  t = "gas";
	}
	if(!dataTypeGas && dataTypeOil) {
	  t = "oil";
	}

	return t;
    };

    function fecha(f) {
	var obj = { 'sDate':'', 'eDate':'' };
	obj.sDate = f.sYear + '-' + f.sMonth + '-01';
	obj.eDate = f.eYear + '-' + f.eMonth + '-01';

	return obj;
    };

    var tipos = function () {
	var tips = $('input[name=inpTipos]');
	var types = '';
	for (var i = 0; i < tips.length; i++) {
	  if (tips[i].checked) {
            types += tips[i].value + ';';
          }
        }

        return types;
    }



    $.ajax({
	url:"http://portal.cnih.cnh.gob.mx/api/produccion_campos.py",
	type:"post",
	datatype:"json",
	data: {
	  'type': type(),
	  'sdate': fecha(f).sDate,
	  'edate': fecha(f).eDate,
	  'contract': "Contratos",//tipos(),
	  'operator': operator,
	  'category': 'phidro;',
	  'field': 'all;',
	  'term':Periodicidad()
	},
	success: function(response) {
	   console.log(response,Periodicidad());
	},
	error: function() { console.log("!", type()); }
    });
  })
});
